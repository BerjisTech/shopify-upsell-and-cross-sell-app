function g_d(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),JSON.parse(t.responseText)}function gv(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),JSON.parse(t.responseText)}function g_s_s_w(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function get_this(e){e&&(e.onload=function(){return e.responseText},e.send())}function createCORSRequest(e,t){let s=new XMLHttpRequest;return"withCredentials"in s?s.open(e,t,!0):"undefined"!=typeof XDomainRequest?(s=new XDomainRequest).open(e,t):s=null,s}function user_browser(){return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"unknown"}console.log(Shopify.formatMoney(1e3,Shopify.money_format));const device=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};let base_url="https://sleek-upsell-updates.herokuapp.com",page_ss=window.location.href,s_s_w=g_s_s_w("https://sleek-upsell.herokuapp.com/s_s_w/"+Shopify.shop);if("y"==sessionStorage.getItem("s_u_w")||page_ss.includes(s_s_w)){sessionStorage.setItem("s_u_w","y");var script=document.createElement("script");function createSUW(){$("body").prepend('<style>.suw{display: table; width: 300px; height: 500px; background: #ffffff; position: fixed; bottom: 0px; left: 0px; z-index: 3000000;}.suw_head, .suw_footer{display: table; width: 100%; height: 50px !important; background: #981B1B !important; color: #ffffff;}.suw_body{overflow-Y: auto; display: table; width: 100%; height: 400px;}.suw_head:before{content: "SETUP WIZARD"; display: table; position: absolute; top: 10px; left: 10px; z-index: 2000000; color: #FFFFFF; font-size: 12px;}.suw_head{cursor:move;}</style>'),$("body").prepend('<div class="draggable suw"><div class="suw_head dragger"></div><div class="suw_body"><img src="https://sleek-upsell.com/assets/images/loader.gif" style="margin: 150px auto;"/></div><div class="suw_footer"></div></div>');var e,t,s=null;document.addEventListener("mousedown",function(l){for(var o=!1,i=0;l.path[i]!==document.body;i++)if(l.path[i].classList.contains("dragger"))o=!0;else if(o&&l.path[i].classList.contains("draggable"))return(s=l.path[i]).classList.add("dragging"),e=l.clientX-s.style.left.slice(0,-2),void(t=l.clientY-s.style.top.slice(0,-2))}),document.addEventListener("mouseup",function(){null!==s&&s.classList.remove("dragging"),s=null}),document.addEventListener("mousemove",function(l){if(null!==s){s.style.left=l.clientX-e+"px",s.style.top=l.clientY-t+"px";var o=s.parentElement.getBoundingClientRect(),i=s.getBoundingClientRect();i.left<o.left&&(s.style.left=0),i.top<o.top&&(s.style.top=0),i.right>o.right&&(s.style.left=o.width-i.width+"px"),i.bottom>o.bottom&&(s.style.top=o.height-i.height+"px")}}),$(".suw_body").load("https://sleek-upsell.herokuapp.com/suw/"+Shopify.shop)}script.type="text/javascript",script.src="https://sleek-upsell.com/assets/js/jquery-1.11.3.min.js",document.getElementsByTagName("head")[0].appendChild(script),script.onload=function(){createSUW()}}else{if("undefined"==typeof jQuery||null==jQuery){var script=document.createElement("script");script.type="text/javascript",script.src="https://sleek-upsell.com/assets/js/jquery-1.11.3.min.js",document.getElementsByTagName("head")[0].appendChild(script),script.onload=function(){sleekUpsell()}}else sleekUpsell();function sleekUpsell(){let page=window.location.pathname,offers_url="https://sleek-upsell-updates.herokuapp.com/offers/"+Shopify.shop,offers=g_d(offers_url),cart=g_d("/cart.js"),auto_collection=offers.auto_collection,settings=offers.settings,drawer_selector='form[action="/cart"]',drawer_position="before",cart_selector='form[action="/cart"]',cart_position="before";function openReplacement(){return this.addEventListener("load",function(){["/cart/add.js","/cart/update.js","/cart/change.js","/cart/clear.js"].includes(this._url)&&(page.includes("/cart")||(cart=g_d("https://"+Shopify.shop+"/cart.js"),console.log("Cart has changed: New item count - "+cart.item_count),console.log(this.response),choose_offer()))}),open.apply(this,arguments)}null!=settings&&(drawer_selector=settings.drawer_location,cart_selector=settings.cart_location,cart_position=settings.cart_position,drawer_position=settings.drawer_position);const open=window.XMLHttpRequest.prototype.open;function choose_offer(){try{cart.item_count>0&&("null"!=auto_collection&&null!=auto_collection&&"1"===auto_collection.status?collection_based():next_offer())}catch(e){next_offer()}}function next_offer(){try{$(".sleek-upsell").remove()}catch(e){}if(page_ss.includes(s_s_w)||"y"==sessionStorage.getItem("s_u_w"))return!1;if(null!=$(".sleek-upsell")&&$(".sleek-upsell").remove(),cart.item_count>0){let e=0,t=Object.keys(offers.offer),s=offers.offer;for(console.log(t),e=0;e<=t.length-1;e++){let l=t[e];if(1==check_offer(l,s[l])){console.log("Showing this offer now"),console.log(e),console.log(l),console.log(s[l]),display_offer(l);break}console.log("Not showing this offer"),console.log(l),console.log(e),console.log(l),console.log(s[l])}}}function collection_based(){if(cart.item_count>0&&"undefined"!=Object.keys(auto_collection)&&Object.keys(auto_collection).length>0&&"1"===auto_collection.status){let e=offers.collects,t=cart.items,s="";console.log("items"),console.log(t),console.log("Looping through "+t.length+" items");for(let l=0;l<t.length;l++)if(s=t[l].product_id,console.log("Checking items "+l+" : "+s),"y"!=sessionStorage.getItem("c_upsold_"+s)){if(console.log("Creating upsell for "+s),-1!=e.findIndex(e=>e.product_id==s)){sessionStorage.setItem("c_upsold_"+s,"y");let o=e.filter(e=>e.product_id==s),i=o[0].collection_id,c=e.filter(e=>e.collection_id==i);console.log("Needed object"),console.log(o),console.log("Collection ID "+i),console.log(c),console.log("Looping through "+c.length+" collection items");for(let e=0;e<c.length;e++)if(console.log("Checking collection item "+e),"z"!=sessionStorage.getItem("c_used_"+c[e].product_id)){if(-1==t.findIndex(t=>t.product_id==c[e].product_id)){if("y"==auto_collection.same_vendor){if(pidV=t[l].vendor,pid2V=gv(base_url+"/gv/"+Shopify.shop+"/"+c[e].product_id).product.vendor,pidV!=pid2V){console.log("Vendor "+pidV+" not same as vendor "+pid2V);continue}console.log("Vendor "+pidV+" same as vendor "+pid2V),sessionStorage.setItem("c_used_"+c[e].product_id,"z"),console.log("Using "+c[e].product_id+" as an upsell for "+s),load_c_based(c[e].product_id)}else sessionStorage.setItem("c_used_"+c[e].product_id,"z"),console.log("Using "+c[e].product_id+" as an upsell for "+s),load_c_based(c[e].product_id);break}sessionStorage.setItem("c_used_"+c[e].product_id,"z")}else console.log("This item was already an upsell "+c[e].product_id);break}console.log("This product aint part of a collection")}else console.log("This has already been upsold")}}function check_offer(e,t){console.log("Checking offer "+e);let s=t.offer[0].status,l=t.offer[0].rule,o=t.blocks,i=o.length;if(1==s){if(console.log("Offer active"),"y"==sessionStorage.getItem("sleek_shown_"+e))return console.log("Offer already shown"),!1;if(i>0){console.log("Offer has blocks");let e=!1;for(let t=0;t<=o.length-1;t++){let s=o[t];if("ANY"==l){if(console.log("Checking if any block is met"),1==check_block(t,s)){console.log("Block "+t+" return true"),e=!0;break}e=!1;break}if("ALL"==l){if(console.log("Checking if all blocks are met"),0==check_block(t,s)){console.log("Block "+t+" return false"),e=!1;break}e=!0;break}}return e}return console.log("Offer has no blocks"),!0}return console.log("Offer not active"),!1}function check_block(e,t){let s=t.oid,l=t.bid,o=t.rule;console.log("Checking block "+l+" of offer "+s),console.log(t);let i=offers.offer[s].conditions,c=i.filter(e=>e.bid==l);if(console.log(i),console.log(c),c.length>0){console.log("This block has conditions");let e=!1;for(let t=0;t<=c.length-1;t++){let s=c[t];if("ANY"==o){if(console.log("Checking if any condition is met"),1==check_condition(t,s)){console.log("condition "+s.cid+" met"),e=!0;break}e=!1;break}if("ALL"==o){if(console.log("Checking if any condition is met"),0==check_condition(t,s)){console.log("condition "+s.cid+" not met"),e=!1;break}e=!0;break}}return e}return!0}function check_condition(e,t){t.cid,t.oid,t.bid;let s=t.type,l=t.quantity,o=t.level,i=t.content,c=t.pid,a=t.vid,r=t.amount,n=(t.country,cart.items);console.log("citems"),console.log(n);let d=!1;if("oc1"==s){if("product"==o){console.log("Now checking if cart has at least "+l+" "+i+" ("+c+")"),console.log("pitems");let e=n.filter(e=>e.product_id==c);console.log(e),e.length>=l?(console.log("found "+e.length+" "+i+"s ("+c+")"),d=!0,console.log(d)):(console.log("found only "+e.length+" "+i+"s ("+c+")"),d=!1)}if("variant"==o){console.log("Now checking if cart has at least "+l+" "+i+" ("+a+")");let e=n.filter(e=>e.variant_id==a);e.length>=l?(console.log("found "+e.length+" "+i+"s ("+a+")"),d=!0):(console.log("found only "+e.length+" "+i+"s ("+a+")"),d=!1)}if("collection"==o){console.log("Checking if cart has at least "+l+" products from collections "+i+"("+c+")");let e=offers.collects.filter(e=>e.collection_id==c),t=0;for(let s=0;s<=n.length-1;s++)if(console.log("citems at "+s),console.log("Now checking "+n[s].product_id),e.findIndex(e=>e.product_id==n[s].product_id)>=0){if(t+=1,console.log("Found "+t+" so far"),t>=l){console.log("Breaking at "+t),d=!0;break}}else;}}if("oc2"==s){if("product"==o){d=n.filter(e=>e.product_id==c).length<=l}if("variant"==o){d=n.filter(e=>e.variant_id==a).length<=l}if("collection"==o){console.log("Checking if cart has at most "+l+" products from collections "+c);let e=offers.collects.filter(e=>e.collection_id==c),t=0;for(let s=0;s<=n.length-1;s++)if(console.log("Now checking "+n[s].product_id),e.findIndex(e=>e.product_id==n[s].product_id)>=0){if(t+=1,console.log("Found "+t+" so far"),t>l){console.log("Breaking at "+t),d=!1;break}d=!0}else;}}if("oc3"==s){if("product"==o){d=n.filter(e=>e.product_id==c).length==l}if("variant"==o){d=n.filter(e=>e.variant_id==a).length==l}if("collection"==o){console.log("Checking if cart has at least "+l+" products from collections "+c);let e=offers.collects.filter(e=>e.collection_id==c),t=0;for(let s=0;s<=n.length-1;s++)if(console.log("Now checking "+n[s].product_id),e.findIndex(e=>e.product_id==n[s].product_id)>=0){if(t+=1,console.log("Found "+t+" so far"),t==l){console.log("Breaking at "+t),d=!0;break}}else;}}if("oc4"==s){if("product"==o){d=n.filter(e=>e.product_id==c).length>0}if("variant"==o){d=n.filter(e=>e.variant_id==a).length>0}if("collection"==o){console.log("Checking if cart has at least "+l+" products from collections "+c);let e=offers.collects.filter(e=>e.collection_id==c),t=0;for(let s=0;s<=n.length-1;s++)if(console.log("Now checking "+n[s].product_id),e.findIndex(e=>e.product_id==n[s].product_id)>=0){if(t+=1,console.log("Found "+t+" so far"),t>0){console.log("Breaking at "+t),d=!1;break}d=!0}else;}}if("oc5"==s&&(d=cart.total_price>=r),"oc6"==s&&(d=cart.total_price<=r),"oc9"==s){let e=n.filter(e=>e.vendor==i);console.log(e),d=e.length>=l}if("oc10"==s){console.log(e);let e=n.filter(e=>e.vendor==i);d=!(e.length>0)}return d}function populateFields(e,t){console.log("Looking for fields");let s=offers.offer[e].fields,l=offers.offer[e].choices;if(s.length>0){console.log("Found "+s.length+" fields"),console.log(s);let e=s.filter(e=>e.pid==t);if(console.log(e),e.length>0){$(".o_h_"+t).innerHTML="";for(let s=0;s<e.length;s++){let o=e[s].fid,i=e[s].type,c=e[s].name,a=e[s].placeholder,r=(e[s].price,e[s].required,l.filter(e=>e.fid==o));if("select"==i){$(".o_h_"+t).append("<div><label>"+a+'</label><select class="form-control select sleek_fields_'+o+'" id="properties['+c+']" name="properties['+c+']"></select></div>'),$(".sleek_fields_"+c).append($('<option value="">'+a+"</option>"));for(let e=0;e<r.length;e++){let t=r[e].value,s=r[e].price;$(".sleek_fields_"+o).append($('<option value="'+t+'">'+t+" ("+s+")</option>"))}}"number"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input type="number" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>'),"text"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input type="text" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>'),"textarea"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><textarea id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'">'+a+"</textarea></div>"),"file"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input type="file" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>'),"checkbox"==i&&$(".o_h_"+t).append('<div><label><input type="checkbox" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /> '+a+"</label></div>"),"checkbox_group"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input type="checkbox" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>'),"radio"==i&&$(".o_h_"+t).append('<div><label><input type="radio" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /> '+a+"</label></div>"),"date"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input type="date" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>'),"swatch"==i&&$(".o_h_"+t).append("<div><label>"+a+'</label><input style="min-width: 150px;" type="color" id="properties['+c+']" name="properties['+c+']" placeholder="'+a+'" /></div>')}}}}function brgxczvy(e,t,s,l,o,i,c){let a=[];for(let e=0;e<cart.items.length;e++)a.push(cart.items[e].product_id);let r={stat_id:"",date:Math.floor(Date.now()/1e3),shop:Shopify.shop,offer:e,product:t,variant:s,quantity:l,ip:"",country:"",type:c,action:i,page:page,device:device(),browser:user_browser(),citems:a,price:o};console.log(r);let n=new XMLHttpRequest,d='stat_id=""&date='+Math.floor(Date.now()/1e3)+"&shop="+Shopify.shop+"&offer="+e+"&product="+t+"&variant="+s+"&quantity="+l+'&ip=""&country=""&type='+c+"&action="+i+"&page="+page+"&device="+device()+"&browser="+user_browser()+"&citems="+JSON.stringify(a)+"&price="+o;n.open("POST","https://sleek-upsell-updates.herokuapp.com/brgxczvy",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?console.log(n.responseText):console.log("Error",n.statusText))},n.send(d)}function setStyles(){$(".sleek-upsell").css("opacity","1"),$(".sleek-upsell").css("transform","none"),$(".sleek-upsell form").css("margin-bottom","0px"),null!=settings&&($("<style>"+settings.override+"</style>").insertAfter(".sleek-upsell"),$(".sleek-upsell").css("background-color",settings.layout_bg),$(".sleek-upsell select").css("background-color",settings.layout_bg),$(".sleek-upsell").css("color",settings.layout_color),$(".sleek-upsell select").css("color",settings.layout_color),$(".sleek-upsell").css("font-family",settings.layout_font),$(".sleek-upsell").css("font-size",settings.layout_size),$(".sleek-upsell").css("margin-top",settings.layout_mt),$(".sleek-upsell").css("margin-bottom",settings.layout_mb),$(".sleek-upsell").css("border-radius",settings.offer_radius),$(".sleek-upsell").css("border-width",settings.offer_bs),$(".sleek-upsell").css("border-color",settings.offer_bc),$(".sleek-upsell").css("border-style",settings.offer_border),$(".sleek-upsell button").css("background-color",settings.button_bg),$(".sleek-upsell button").css("color",settings.button_color),$(".sleek-upsell button").css("font-family",settings.button_font),$(".sleek-upsell button").css("font-size",settings.button_size),$(".sleek-upsell button").css("margin-top",settings.button_mt),$(".sleek-upsell button").css("margin-bottom",settings.button_mb),$(".sleek-upsell button").css("border-radius",settings.button_radius),$(".sleek-upsell button").css("border-width",settings.button_bs),$(".sleek-upsell button").css("border-color",settings.button_bc),$(".sleek-upsell button").css("border-style",settings.button_border),$(".sleek-upsell img").css("border-radius",settings.image_radius),$(".sleek-upsell img").css("border-width",settings.image_bs),$(".sleek-upsell img").css("color",settings.image_bc),$(".sleek-upsell img").css("border-style",settings.image_border),$(".sleek-text").css("color",settings.text_color),$(".sleek-text").css("font-family",settings.text_font),$(".sleek-text").css("font-size",settings.text_size),$(".sleek-title").css("color",settings.title_color),$(".sleek-title").css("font-family",settings.title_font),$(".sleek-title").css("font-size",settings.title_size),$(".sleek-price").css("color",settings.price_color),$(".sleek-price").css("font-family",settings.price_font),$(".sleek-price").css("font-size",settings.price_size))}function display_offer(oid){let element="",settings=offers.settings,lay=offers.offer[oid].offer[0].layout,lay_el='<div class="card sleek-upsell"></div>',nudge="before";page.includes("/cart")?(element=cart_selector,nudge=cart_position):(element=drawer_selector,nudge=drawer_position),$("<style>.sleek-upsell{background: #ECF0F1; color: #2B3D51; padding: 5px; font-family: inherit; vertical-align: middle; margin: 5px;}.sleek-image img{width: 100px;}.sleek-text{font-weight: bold;}.sleek-upsell select{padding: 4px; margin-top: 5px;}.sleek-prices{font-weight: bold; margin-bottom: 5px;}.sleek-compare-price{text-decoration: line-through;}.sleek-upsell button{padding: 10px; border: none; background: #2B3D51; color: #FFFFFF; font-weight: bold; border-radius: 0px; cursor: pointer; width: 100%;}.card{display: table;}.card .sleek-form{display: flex;}.card .sleek-image, .card .sleek-offer, .card .sleek-card-atc{display: table; align-self: center; padding: 5px;}.card .sleek-offer{flex-grow: 4;}.card .sleek-prices{text-align: center;}.block, .block .sleek-form, .block .sleek-text, .block .sleek-atc{display: table;}.sleek-block{display: flex;}.block .sleek-image, .block .sleek-offer{display: table; align-self: center; padding: 5px;}.block .sleek-offer{flex-grow: 1;}.half-block, .half-block .sleek-form, .half-block .sleek-text, .half-block .sleek-atc{display: table;}.sleek-half-block{display: flex;}.half-block .sleek-image, .half-block .sleek-offer{display: table; align-self: center; padding: 5px;}.half-block .sleek-offer{flex-grow: 1;}.flat, .flat .sleek-form, .flat .sleek-text{display: table;}.sleek-flat{display: flex;}.flat .sleek-image, .flat .sleek-offer{display: table; align-self: center; padding: 5px;}.flat .sleek-offer{flex-grow: 1;}.flat .flex-select{display: flex; width: auto; margin-top: 10px;}.flat .v-select{display: table; width: 100%; align-items: center; justify-content: space-between;}.flat .atc{flex-grow: 4;}.flat .q-select{margin-top: 0px; margin-right: 10px;}.compact, .compact .sleek-form, .compact .sleek-text, .compact .sleek-atc{display: table;}.sleek-compact{display: flex;}.compact .sleek-image, .compact .sleek-offer{display: table; align-self: center; padding: 5px;}.compact .sleek-offer{flex-grow: 1;}.compact .sleek-atc{margin-top: 5px;}@media only screen and (max-width: 600px){.sleek-upsell{width: 97%; margin: 5px auto;}.card select{max-width: 100px;}.block select{max-width: 200px;}.sleek-prices *{display: inline-table;}.block .sleek-form, .block .sleek-text, .block .sleek-atc{width: 100%;}}</style>").insertBefore(element),"card"==lay&&(lay_el='<div class="card sleek-upsell"></div>'),"flat"==lay&&(lay_el='<div class="flat sleek-upsell"></div>'),"block"==lay&&(lay_el='<div class="block sleek-upsell"></div>'),"half-block"==lay&&(lay_el='<div class="half-block sleek-upsell"></div>'),"compact"==lay&&(lay_el='<div class="compact sleek-upsell"></div>'),"prepend"==nudge&&$(element).prepend(lay_el),"append"==nudge&&$(element).append(lay_el),"before"==nudge&&$(lay_el).insertBefore(element),"after"==nudge&&$(lay_el).insertAfter(element),"y"==offers.offer[oid].offer[0].close&&$(lay_el).append('<div style="display: table; position: relative; width: 100%; text-align: right;"><span class="reject_offer" style="font-size: 15px; cursor: pointer;">x</span></div>');let products=offers.offer[oid].products,oprods=offers.products;console.log("Found products"),console.log(products),console.log("Shop products"),console.log(oprods);for(let i=0;i<products.length;i++){let v=products[i],pid=v.product,index=oprods.findIndex(e=>e.id==pid),datacell=oprods[index],Pgv=gv(base_url+"/gv/"+Shopify.shop+"/"+pid),pDet=Pgv.product,curr=Pgv.shop.money_format;curr=curr.substr(0,curr.indexOf("{")).substr(0,curr.indexOf("}"));let oatc=offers.offer[oid].offer[0].atc,vatc=v.atc,atc="ADD TO CART",otext=offers.offer[oid].offer[0].text,vtext=v.text,dtext="ADD TO CART";atc=""!=oatc?oatc:""!=vatc?vatc:"ADD TO CART",dtext=""!=otext?otext:""!=vtext?vtext:"Would you like a "+pDet.title,console.log("Product "+pid+" found at position "+index),console.log(datacell);let o_ui='<form class="sleek-form" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div><div class="sleek-card-atc"> <div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></form>";if("card"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div><div class="sleek-card-atc"> <div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></form>"),"flat"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-text">'+dtext+'</div><div class="sleek-flat"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <div class="flex-select"> <select name="quantity" class="q-select q-'+pid+'"></select> <button class="sleek-atc" type="submit">'+atc+"</button> </div></div></div></div></form>"),"block"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-text">'+dtext+'</div><div class="sleek-block"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div></div><button class="sleek-atc" type="submit">'+atc+"</button> </form>"),"half-block"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-half-block"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div></div><button class="sleek-atc" type="submit">'+atc+"</button> </form>"),"compact"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-compact"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></div></form>"),$(".sleek-upsell").append(o_ui),console.log("Adding "+pid+" for "+i),$('.sleek-form[data-product-index="'+i+'"]').length>1)for(let e=1;e<=$('.sleek-form[data-product-index="'+i+'"]').length;e++)console.log("removing "+e),$('.sleek-form[data-product-index="'+i+'"]')[e].remove();"n"==v.show_title&&$(".sleek-title").remove(),"n"==v.show_price&&$(".sleek-prices").remove(),"n"==v.show_image&&$(".sleek-image").remove(),"n"==v.v_price&&$(".sleek-compare-price").remove(),"n"==v.c_price&&$(".sleek-compare-price").remove(),"n"==v.q_select&&($(".q_select").style.display="none"),populateFields(oid,pid);for(let e=0;e<pDet.variants.length;e++)console.log(pDet.variants[i].title),pDet.variants[e].inventory_quantity>0&&$(".v-"+pid).append('<option value="'+pDet.variants[e].id+'">'+pDet.variants[e].title+" ("+curr+" "+pDet.variants[e].price+")</option>");for(pDet.variants.length<2&&$(".v-"+pid).attr("style","display:none"),q=1;q<=10;q++)$(".q-"+pid).append('<option value="'+q+'">'+q+"</option>");brgxczvy(oid,pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"show","show"),$(".v-"+pid).change(function(){imgPos=pDet.variants.findIndex(e=>e.id==$(this).val()),$('form[data-product-product_id="'+pid+'"] img').attr("src",pDet.images[0].src),brgxczvy(oid,pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"variant change","impression")}),$(".q-"+pid).change(function(){brgxczvy(oid,pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"quantity change","impression")}),$('form[data-product-product_id="'+pid+'"]').hover(function(){brgxczvy(oid,pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"hover","impression")}),$(".sleek-form").submit(function(e){if(e.preventDefault(),""!=v.rv)g_s_s_w("/cart/change?id="+v.rv+"&quantity=0");else if(""!=v.rp){let e=oprods[oprods.findIndex(e=>e.id==v.rp)],t=[];for(let t=0;t<e.variants.length;t++)g_s_s_w("/cart/change?id="+e.variants[t].id+"&quantity=0")}$.ajax({type:"POST",url:"/cart/add.js",dataType:"json",data:$(this).serialize(),success:function(response){"y"==offers.offer[oid].offer[0].stop_show&&sessionStorage.setItem("sleek_shown_"+oid,"y"),brgxczvy(oid,pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"add to cart","purchase"),$(".sleek-atc").innerHTML='<img src="https://sleek-upsell.com/assets/images/loader.gif" />',"y"==offers.offer[oid].offer[0].discount&&""!=offers.offer[oid].offer[0].code&&g_s_s_w("https://"+Shopify.shop+"/discount/"+offers.offer[oid].offer[0].code),"y"==offers.offer[oid].offer[0].to_checkout?window.location.href="/checkout":page.includes("/cart")?(console.log(response),"y"==offers.offer[oid].offer[0].stop_show&&sessionStorage.setItem("sleek_shown_"+oid,"y"),$(".sleek-upsell").remove(),window.location.reload(!1)):($(".sleek-upsell").remove(),console.log(response),null!=settings&&"y"==settings.refresh_state&&eval(settings.drawer_refresh),next_offer())},error:function(e){console.log(e),$(this).find("button").html("Could not add product"),setTimeout(function(){$(this).remove()},1e3)}})})}null!=$(".reject_offer")&&$(".reject_offer").click(function(){sessionStorage.setItem("sleek_shown_"+oid,"y"),brgxczvy(oid,"","","","","reject","reject"),$(".sleek-upsell").remove(),setTimeout(function(){next_offer()},300)}),setStyles()}function load_c_based(pid){try{let i=0,element="",settings=offers.settings,auto_collection=offers.auto_collection;console.log(offers),console.log(auto_collection);let lay=auto_collection.layout,lay_el='<div class="card sleek-upsell"></div>',nudge="before";page.includes("/cart")?(element=cart_selector,nudge=cart_position):(element=drawer_selector,nudge=drawer_position),$("<style>.sleek-upsell{background: #ECF0F1; color: #2B3D51; padding: 5px; font-family: inherit; vertical-align: middle; margin: 5px;}.sleek-image img{width: 100px;}.sleek-text{font-weight: bold;}.sleek-upsell select{padding: 4px; margin-top: 5px;}.sleek-prices{font-weight: bold; margin-bottom: 5px;}.sleek-compare-price{text-decoration: line-through;}.sleek-upsell button{padding: 10px; border: none; background: #2B3D51; color: #FFFFFF; font-weight: bold; border-radius: 0px; cursor: pointer; width: 100%;}.card{display: table;}.card .sleek-form{display: flex;}.card .sleek-image, .card .sleek-offer, .card .sleek-card-atc{display: table; align-self: center; padding: 5px;}.card .sleek-offer{flex-grow: 4;}.card .sleek-prices{text-align: center;}.block, .block .sleek-form, .block .sleek-text, .block .sleek-atc{display: table;}.sleek-block{display: flex;}.block .sleek-image, .block .sleek-offer{display: table; align-self: center; padding: 5px;}.block .sleek-offer{flex-grow: 1;}.half-block, .half-block .sleek-form, .half-block .sleek-text, .half-block .sleek-atc{display: table;}.sleek-half-block{display: flex;}.half-block .sleek-image, .half-block .sleek-offer{display: table; align-self: center; padding: 5px;}.half-block .sleek-offer{flex-grow: 1;}.flat, .flat .sleek-form, .flat .sleek-text{display: table;}.sleek-flat{display: flex;}.flat .sleek-image, .flat .sleek-offer{display: table; align-self: center; padding: 5px;}.flat .sleek-offer{flex-grow: 1;}.flat .flex-select{display: flex; width: auto; margin-top: 10px;}.flat .v-select{display: table; width: 100%; align-items: center; justify-content: space-between;}.flat .atc{flex-grow: 4;}.flat .q-select{margin-top: 0px; margin-right: 10px;}.compact, .compact .sleek-form, .compact .sleek-text, .compact .sleek-atc{display: table;}.sleek-compact{display: flex;}.compact .sleek-image, .compact .sleek-offer{display: table; align-self: center; padding: 5px;}.compact .sleek-offer{flex-grow: 1;}.compact .sleek-atc{margin-top: 5px;}@media only screen and (max-width: 600px){.sleek-upsell{width: 97%; margin: 5px auto;}.card select{max-width: 100px;}.block select{max-width: 200px;}.sleek-prices *{display: inline-table;}.block .sleek-form, .block .sleek-text, .block .sleek-atc{width: 100%;}}</style>").insertBefore(element),"card"==lay&&(lay_el='<div class="card sleek-upsell"></div>'),"flat"==lay&&(lay_el='<div class="flat sleek-upsell"></div>'),"block"==lay&&(lay_el='<div class="block sleek-upsell"></div>'),"half-block"==lay&&(lay_el='<div class="half-block sleek-upsell"></div>'),"compact"==lay&&(lay_el='<div class="compact sleek-upsell"></div>'),"prepend"==nudge&&$(element).prepend(lay_el),"append"==nudge&&$(element).append(lay_el),"before"==nudge&&$(lay_el).insertBefore(element),"after"==nudge&&$(lay_el).insertAfter(element),"y"==auto_collection.close&&$(lay_el).append('<div style="display: table; position: relative; width: 100%; text-align: right;"><span class="reject_offer" style="font-size: 15px; cursor: pointer;">x</span></div>');let oprods=offers.products;console.log("Shop products"),console.log(oprods);let index=oprods.findIndex(e=>e.id==pid),datacell=oprods[index],Pgv=gv(base_url+"/gv/"+Shopify.shop+"/"+pid),pDet=Pgv.product,curr=Pgv.shop.money_format;curr=curr.substr(0,curr.indexOf("{")).substr(0,curr.indexOf("}"));let oatc=auto_collection.atc,atc="ADD TO CART",otext=auto_collection.text,dtext="";dtext=""!=otext?otext:"Would you like a "+pDet.title,atc=""!=oatc?oatc:"ADD TO CART",console.log("Product "+pid+" found at position "+index),console.log(datacell);let o_ui='<form class="sleek-form" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div><div class="sleek-card-atc"> <div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></form>";if("card"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div><div class="sleek-card-atc"> <div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></form>"),"flat"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-text">'+dtext+'</div><div class="sleek-flat"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <div class="flex-select"> <select name="quantity" class="q-select q-'+pid+'"></select> <button class="sleek-atc" type="submit">'+atc+"</button> </div></div></div></div></form>"),"block"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-text">'+dtext+'</div><div class="sleek-block"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div></div><button class="sleek-atc" type="submit">'+atc+"</button> </form>"),"half-block"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-half-block"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div></div></div><button class="sleek-atc" type="submit">'+atc+"</button> </form>"),"compact"==lay&&(o_ui='<form class="sleek-form" action="/cart/add" enctype="multipart/form-data" data-product-index="'+i+'" data-product-product_id="'+pid+'"> <div class="sleek-compact"> <div class="sleek-image"> <img src="'+pDet.image.src+'"/> </div><div class="sleek-offer"> <div class="sleek-text">'+dtext+'</div><div class="sleek-title">'+pDet.title+'</div><div class="sleek-prices"> <span class="sleek-price money">'+curr+" "+pDet.variants[0].price+'</span> <span class="sleek-compare-price money">'+curr+" "+pDet.variants[0].price+'</span> </div><div class="sleek-selectors"> <div class="offer_fields_holder o_h_'+pid+'"></div> <select name="id" class="v-select v-'+pid+'"></select> <select name="quantity" class="q-select q-'+pid+'"></select> </div><button class="sleek-atc" type="submit">'+atc+"</button> </div></div></form>"),$(".sleek-upsell").append(o_ui),$('.sleek-form[data-product-index="0"]').length>1)for(let e=1;e<=$('.sleek-form[data-product-index="0"]').length;e++)console.log("removing "+e),$('.sleek-form[data-product-index="0"]')[e].remove();"n"==auto_collection.show_title&&$(".sleek-title").remove(),"n"==auto_collection.show_price&&$(".sleek-prices").remove(),"n"==auto_collection.show_image&&$(".sleek-image").remove(),"n"==auto_collection.v_price&&$(".sleek-compare-price").remove(),"n"==auto_collection.c_price&&$(".sleek-compare-price").remove(),"n"==auto_collection.q_select&&($(".q_select").style.display="none");for(let e=0;e<pDet.variants.length;e++)pDet.variants[e].inventory_quantity>0&&$(".v-"+pid).append('<option value="'+pDet.variants[e].id+'">'+pDet.variants[e].title+" ("+curr+" "+pDet.variants[e].price+")</option>");for(pDet.variants.length<2&&$(".v-"+pid).attr("style","display:none"),q=1;q<=10;q++)$(".q-"+pid).append('<option value="'+q+'">'+q+"</option>");brgxczvy("collection",pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"show","show"),$(".v-"+pid).change(function(){imgPos=pDet.variants.findIndex(e=>e.id==$(this).val()),$('form[data-product-product_id="'+pid+'"] img').attr("src",pDet.images[0].src),brgxczvy("collection",pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"variant change","impression")}),$(".q-"+pid).change(function(){brgxczvy("collection",pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"quantity change","impression")}),$('form[data-product-product_id="'+pid+'"]').hover(function(){brgxczvy("collection",pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"hover","impression")}),$(".sleek-form").submit(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/cart/add.js",dataType:"json",data:$(this).serialize(),success:function(response){sessionStorage.setItem("sleek_shown_collection","y"),brgxczvy("collection",pid,$(".v-"+pid).val(),$(".q-"+pid).val(),pDet.variants[0].price,"add to cart","purchase"),$(".sleek-atc").innerHTML='<img src="https://sleek-upsell.com/assets/images/loader.gif" />',"y"==auto_collection.discount&&""!=auto_collection.code&&g_s_s_w("https://"+Shopify.shop+"/discount/"+auto_collection.code),"y"==auto_collection.to_checkout?window.location.href="/checkout":page.includes("/cart")?(console.log(response),sessionStorage.setItem("sleek_shown_collection","y"),$(".sleek-upsell").remove(),window.location.reload(!1)):($(".sleek-upsell").remove(),console.log(response),null!=settings&&"y"==settings.refresh_state&&eval(settings.drawer_refresh),collection_based())},error:function(e){console.log(e),$(this).find("button").html("Could not add product"),setTimeout(function(){$(this).remove()},1e3)}})}),null!=$(".reject_offer")&&$(".reject_offer").click(function(){sessionStorage.setItem("sleek_shown_collection","y"),brgxczvy("collection","","","","","reject","reject"),$(".sleek-upsell").remove(),setTimeout(function(){collection_based()},300)}),setStyles()}catch(e){console.log(e)}}page.includes("/cart")||(window.XMLHttpRequest.prototype.open=openReplacement),choose_offer()}}